(this["webpackJsonpgoit-react-hw-09-image-finder"]=this["webpackJsonpgoit-react-hw-09-image-finder"]||[]).push([[0],{11:function(e,t,a){e.exports={ImageGallery__section:"ImageGallery_ImageGallery__section__2Ki1f",ImageGallery:"ImageGallery_ImageGallery__WSN_X"}},12:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__1VV--",ImageGalleryItem__image:"ImageGalleryItem_ImageGalleryItem__image__1LaaR"}},14:function(e,t,a){e.exports={Overlay:"Modal_Overlay__1yXFv",Modal:"Modal_Modal__2fIBu"}},24:function(e,t,a){e.exports={Button:"Button_Button__21hcj"}},31:function(e,t,a){},5:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar__3g3Wt",SearchForm:"Searchbar_SearchForm__1LxId",SearchForm__button:"Searchbar_SearchForm__button__2TS6V",SearchForm__button_label:"Searchbar_SearchForm__button_label__1MHAz","SearchForm--input":"Searchbar_SearchForm--input__2Gyxz"}},73:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(7),o=a.n(c),l=(a(31),a(4)),i=a(5),s=a.n(i),u=a(1);function m(e){var t=e.onSubmit,a=Object(n.useState)(""),r=Object(l.a)(a,2),c=r[0],o=r[1],i=Object(n.useCallback)((function(e){e.preventDefault(),""!==c.trim()?(t(c),o("")):alert("\u041f\u0443\u0441\u0442\u043e\u0435 \u043f\u043e\u043b\u0435")}),[c,t]);return Object(u.jsx)("header",{className:s.a.Searchbar,children:Object(u.jsxs)("form",{className:s.a.SearchForm,onSubmit:i,children:[Object(u.jsx)("button",{type:"submit",className:s.a.SearchForm__button,children:Object(u.jsx)("span",{className:s.a.SearchForm__button_label,children:"Search"})}),Object(u.jsx)("input",{className:s.a.SearchForm__input,type:"text",placeholder:"Search images and photos",value:c,onChange:function(e){o(e.currentTarget.value.toLowerCase())}})]})})}var b=a(15),j=a(11),d=a.n(j),h=a(12),_=a.n(h);function g(e){var t=e.image,a=e.onClick;return Object(u.jsx)("li",{className:_.a.ImageGalleryItem,onClick:a,children:Object(u.jsx)("img",{src:t.webformatURL,alt:t.tags,className:_.a.ImageGalleryItem__image})})}var f=a(24),O=a.n(f);function p(e){var t=e.onLoadMore;return Object(u.jsx)("button",{"data-action":"loadMore",type:"button",className:O.a.Button,onClick:t,children:"Load more"})}var v=a(13),S=a.n(v),x=a(25),y=a(9),I=a.n(y);I.a.defaults.baseURL="https://pixabay.com/api/",I.a.defaults.params={key:"19136435-96f0ae3906c94a349fe1f1440",image_type:"photo",orientation:"horizontal",per_page:12};var w={getImg:function(){var e=Object(x.a)(S.a.mark((function e(){var t,a,n,r,c=arguments;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:"",a=c.length>1&&void 0!==c[1]?c[1]:1,console.log(t),console.log(a),e.prev=4,e.next=7,I.a.get("",{params:{q:t,page:a}});case 7:return n=e.sent,r=n.data,e.abrupt("return",{hits:r.hits,totalHits:r.totalHits});case 12:return e.prev=12,e.t0=e.catch(4),console.log(e.t0),e.abrupt("return",{hits:[],totalHits:0});case 16:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(){return e.apply(this,arguments)}}()},F=a(14),G=a.n(F),N=document.querySelector("#modal-root");function k(e){var t=e.children,a=e.onToggleModal;Object(n.useEffect)((function(){var e=function(e){"Escape"===e.code&&a()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[a]);return Object(c.createPortal)(Object(u.jsx)("div",{className:G.a.Overlay,onClick:function(e){e.target===e.currentTarget&&a()},children:Object(u.jsx)("div",{className:G.a.Modal,children:t})}),N)}var M=a(26),L=a.n(M);function C(e){var t=e.imageName,a=Object(n.useState)([]),r=Object(l.a)(a,2),c=r[0],o=r[1],i=Object(n.useState)(1),s=Object(l.a)(i,2),m=s[0],j=s[1],h=Object(n.useState)(null),_=Object(l.a)(h,2),f=_[0],O=_[1],v=Object(n.useState)("idle"),S=Object(l.a)(v,2),x=S[0],y=S[1],I=Object(n.useState)(!1),F=Object(l.a)(I,2),G=F[0],N=F[1],M=Object(n.useState)(""),C=Object(l.a)(M,2),E=C[0],T=C[1];Object(n.useEffect)((function(){y("pending"),w.getImg(t).then((function(e){var a=e.hits,n=e.totalHits;if(console.log(a),0===n)return Promise.reject(new Error("\u041f\u043e \u043f\u043e\u0438\u0441\u043a\u0443 ".concat(t," \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e")));window.scrollTo({top:0}),o(a),y("resolved")})).catch((function(e){O(e),o([]),j(1),y("rejected")}))}),[t]),Object(n.useEffect)((function(){y("pending"),w.getImg(t,m).then((function(e){o([].concat(Object(b.a)(c),Object(b.a)(e.hits))),y("resolved")})).catch((function(e){O(e),y("rejected")})).finally((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}))}),[m,t]);var B=function(){N(!G)};return Object(u.jsxs)("div",{className:d.a.ImageGallery__section,children:["idle"===x&&Object(u.jsx)("p",{children:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u0435"}),Object(u.jsx)("ul",{className:d.a.ImageGallery,children:c&&c.map((function(e){return Object(u.jsx)(g,{image:e,onClick:function(){!function(e){T(e),B()}(e.largeImageURL)}},e.id)}))}),"rejected"===x&&Object(u.jsx)("h1",{style:{color:"red"},children:f.message}),"pending"===x&&Object(u.jsx)(L.a,{type:"TailSpin",color:"#00BFFF"}),(c.length>0||"resolved"===x)&&Object(u.jsx)(p,{onLoadMore:function(){j(m+1)}}),G&&Object(u.jsx)(k,{onToggleModal:B,children:Object(u.jsx)("img",{src:E,alt:c.tags})})]})}function E(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],r=t[1],c=Object(n.useCallback)((function(e){r(e)}),[]);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(m,{onSubmit:c}),Object(u.jsx)(C,{imageName:a})]})}o.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(E,{})}),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.ba947e1a.chunk.js.map